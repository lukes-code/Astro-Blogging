---
import { client } from "../../lib/contentful";
import Layout from "../../layouts/Layout.astro";
import PostLayout from "../../layouts/PostLayout.astro";

const { slug } = Astro.params;
let post;

try {
  post = await client.getSingleBlogPost(slug);
} catch (error) {
  return Astro.redirect("/404");
}
---

<Layout title={`Post | ${post.id}`}>
  <PostLayout post={post} />
</Layout>
